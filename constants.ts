import { NovelSettings } from "./types";

/**
 * 默认小说设置
 */
export const DEFAULT_NOVEL_SETTINGS: NovelSettings = {
    genre: '都市异能',
    trope: '直播+系统+算命',
    protagonistType: '高冷，但是内心戏丰富，杀伐果断',
    goldenFinger: '能够看到每个人未来的死亡倒计时和原因',
    pacing: 'fast',
    targetAudience: 'male',
    tone: '表面轻松，实则紧张刺激，带有悬疑感'
};

/**
 * AI 角色设定 (System Instruction)
 * 核心：资深网文主编 + 爆款写手
 */
export const SYSTEM_INSTRUCTION = `
你是一位拥有10年经验的资深网文主编，同时也是一位在番茄/起点平台拥有多部百万收藏作品的"大神"级作家。
你的专长是：
1. **捕捉热点**：深知当前中国网文市场的流行趋势（如规则怪谈、年代文、神豪、反派偷听心声等）。
2. **黄金三章**：极其擅长开篇设计，懂得如何在第一章抛出钩子（Hook），第三章推向第一个高潮。
3. **情绪价值**：你写的小说核心是为了提供"情绪价值"（爽、甜、虐、惊）。
4. **节奏把控**：拒绝水文，强调"期待感-压抑-爆发"的循环。

在生成内容时，请遵循以下原则：
- **格式**：使用Markdown格式，结构清晰。
- **语言**：通俗易懂，极具画面感，少用形容词堆砌，多用动词和对话。
- **受众**：针对手机阅读习惯，段落不宜过长，金句频出。
- **核心**：必须突出"金手指"的作用，让读者感到"爽"。

严禁：
- 说教式的文字。
- 过于文青、晦涩的描写。
- 逻辑硬伤。
`;

/**
 * 提示词模板管理
 * 方便后续提取和修改
 */
export const PROMPTS = {
    // 创意脑暴
    IDEA_GENERATION: (settings: NovelSettings) => `
请根据以下设定，构思3个具有"爆款潜质"的小说开篇创意（脑洞）：
- **流派**：${settings.genre}
- **核心梗**：${settings.trope}
- **主角类型**：${settings.protagonistType}
- **金手指**：${settings.goldenFinger}
- **受众**：${settings.targetAudience === 'male' ? '男频（热血、升级、征服）' : '女频（情感、脑洞、复仇）'}

要求：
1. 每个创意包含：【书名】、【一句话简介】（吸引点击）、【核心爽点】、【开篇冲突】。
2. 必须要符合当前网文市场的快节奏需求。
3. 创意之间要有差异化。
`,

    // 大纲生成
    OUTLINE_GENERATION: (settings: NovelSettings, selectedIdea: string) => `
基于创意：
"${selectedIdea}"

请生成一份详细的**前15章细纲**（即"黄金开篇"大纲）。
设定：${JSON.stringify(settings)}

要求：
1. **前3章**：必须完成主角背景介绍、金手指觉醒、第一个大冲突的铺垫与初步解决（小高潮）。
2. **第4-10章**：扩展世界观，引入第一个反派或打脸对象，不断拉高期待感。
3. **第11-15章**：第一个大剧情的高潮爆发，主角获得巨大收获。
4. 每一章都要注明【本章爽点】和【结尾钩子】（如何吸引读者点开下一章）。
`,

    // 人设生成
    CHARACTER_DESIGN: (settings: NovelSettings) => `
请为这部小说设计核心人物小传（主角 + 1个核心配角 + 1个反派）。
设定参考：${JSON.stringify(settings)}

每个人物包含：
- **姓名**：好记，有特色。
- **外貌特征**：具体，有记忆点。
- **性格关键词**：3个词。
- **核心动力/欲望**：他/她想要什么？
- **人设反差/萌点**：增加人物立体感。
- **金手指/能力详情**（仅限主角）：详细说明能力的限制和升级路线。
`,

    // 正文写作
    CHAPTER_WRITING: (chapterNum: number, chapterTitle: string, outline: string, style: string) => `
请撰写正文。
**章节**：第 ${chapterNum} 章
**标题**：${chapterTitle}
**本章大纲**：${outline}
**文风要求**：${style}

写作要求：
1. **字数**：2000字左右（网文标准章节长度）。
2. **开篇**：不要废话，直接切入场景或冲突。
3. **对话**：对话要符合人物性格，不要为了对话而对话。
4. **感官描写**：多描写视觉、听觉、痛觉，增强代入感。
5. **结尾**：必须设置悬念（断章），让读者欲罢不能。
6. **排版**：适合手机阅读，多短句，多分段。
`
};
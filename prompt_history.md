
# 提示词历史记录 (Prompt History)

> 记录每次代码迭代后固化的核心 Prompt 逻辑，便于回溯和优化。

## 版本 v2.0 (Backend Separation)

### 架构变更
提示词逻辑已完全迁移至服务端 (`server/prompts.ts`)。前端不再通过 API 发送 raw prompt，而是发送意图 (Intent) 和参数。

### Prompt 优化
- **结构化输出**: 在 System Instruction 中强化了 Markdown 格式要求，确保流式输出在前端渲染时不乱码。
- **Context 注入**: 大纲和正文生成步骤增加了 Context 参数，允许将上一步的生成结果无损传入下一步。

## 版本 v1.1 (Random Feature Added)

### 核心变更
新增 `RANDOM_DATA_POOL` 数据池，用于客户端侧的随机组合生成。
*(注：v2.0 中该数据池已迁移至 `server/data.ts`)*

## 版本 v1.0 (Initial)

### 系统指令 (System Instruction)
角色：资深网文主编 + 爆款写手
核心能力：
1. 捕捉热点（规则怪谈、神豪等）。
2. 黄金三章（Hook设计）。
3. 情绪价值（爽、甜、虐）。
4. 拒绝水文。

### 功能 Prompt 模板

#### 1. 创意脑暴 (Idea Generation)
**输入**: 流派、核心梗、主角类型、金手指、受众、**新增：基调**。
**目标**: 生成3个具有差异化的开篇脑洞。
**关键要求**: 包含【书名】、【一句话简介】、【核心爽点】、【开篇冲突】。

#### 2. 大纲生成 (Outline Generation)
**输入**: 选定的创意 + 设定。
**目标**: 生成前15章细纲。
**结构**:
- 前3章：背景+金手指+小高潮。
- 4-10章：世界观+反派。
- 11-15章：大高潮爆发。
**关键要求**: 必须注明【本章爽点】和【结尾钩子】。

#### 3. 人设设计 (Character Design)
**输入**: 小说设定。
**目标**: 主角 + 核心配角 + 反派。
**关键点**: 姓名、外貌、性格、核心欲望、反差萌点。

#### 4. 正文写作 (Chapter Writing)
**输入**: 章节号、标题、本章大纲、文风。
**目标**: 2000字左右的正文。
**技巧**: 少废话，多感官描写，必须断章（悬念）。
